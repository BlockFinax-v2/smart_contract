ğŸš€ Starting Diamond Upgrade Across All Networks
================================================


\033[1;33mâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\033[0m
\033[1;33mâ”‚ Upgrading Network: liskSepolia\033[0m
\033[1;33mâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\033[0m

WARNING: You are currently using Node.js v23.11.0, which is not supported by Hardhat. This can lead to unexpected behavior. See https://v2.hardhat.org/nodejs-versions


[dotenv@17.2.3] injecting env (8) from .env -- tip: ğŸ”„ add secrets lifecycle management: https://dotenvx.com/ops
[dotenv@17.2.3] injecting env (0) from .env -- tip: âš™ï¸  write to custom object with { processEnv: myObject }

ğŸ”„ Starting Diamond upgrade on liskSepolia...

ğŸ“‹ Upgrade Info:
   Network: liskSepolia
   Chain ID: 4202
   Deployer: 0xf070F568c125b2740391136662Fc600A2A29D2A6
   Balance: 0.228780411484942545 ETH

ğŸ“ Diamond Address: 0xE133CD2eE4d835AC202942Baff2B1D6d47862d34

ğŸ” Checking for updated facets...
   Reading Diamond state...
   âœ“ AddressLinkingFacet - Up to date
   âœ“ DiamondLoupeFacet - Up to date
   âœ¨ GovernanceFacet - UPDATED (will be replaced)
   âœ“ LiquidityPoolFacet - Up to date
   âœ“ OwnershipFacet - Up to date

ğŸ” Checking for removed facets...
   Deployed facets: DiamondLoupeFacet, GovernanceFacet, LiquidityPoolFacet, OwnershipFacet, AddressLinkingFacet
   Current facets in code: AddressLinkingFacet, DiamondLoupeFacet, GovernanceFacet, LiquidityPoolFacet, OwnershipFacet

ğŸ“Š Upgrade Summary:
   New facets: 0
   Updated facets: 1
   Removed facets: 0

ğŸ“¦ Deploying GovernanceFacet...
âœ… GovernanceFacet deployed at: 0xd26CDF1b3E74758c1B30fA7E487DAb2458270ffe
   â™»ï¸  REPLACE GovernanceFacet: 35 existing functions
   â• ADD GovernanceFacet: 2 new functions

âš™ï¸  Executing Diamond upgrade...
   Total operations: 2
   Transaction sent: 0x2c548f84884564bfa6fa4f8096f09291c7965f3b53fd73da03691fb8a027fd83
   âœ… Upgrade successful! Gas used: 619701

ğŸ” Verifying new facets...

ğŸ” Verifying contract at 0xd26CDF1b3E74758c1B30fA7E487DAb2458270ffe on liskSepolia...
WARNING: You are currently using Node.js v23.11.0, which is not supported by Hardhat. This can lead to unexpected behavior. See https://v2.hardhat.org/nodejs-versions


[dotenv@17.2.3] injecting env (0) from .env -- tip: âš™ï¸  specify custom .env file path with { path: '/custom/path/.env' }
[INFO] Sourcify Verification Skipped: Sourcify verification is currently disabled. To enable it, add the following entry to your Hardhat configuration:

sourcify: {
  enabled: true
}

Or set 'enabled' to false to hide this message.

For more information, visit https://hardhat.org/hardhat-runner/plugins/nomicfoundation-hardhat-verify#verifying-on-sourcify
[WARNING] Network and explorer-specific api keys are deprecated in favour of the new Etherscan v2 api. Support for v1 is expected to end by May 31st, 2025. To migrate, please specify a single Etherscan.io api key the apiKey config value.
Successfully submitted source code for contract
contracts/facets/GovernanceFacet.sol:GovernanceFacet at 0xd26CDF1b3E74758c1B30fA7E487DAb2458270ffe
for verification on the block explorer. Waiting for verification result...

Successfully verified contract GovernanceFacet on the block explorer.
https://sepolia-blockscout.lisk.com/address/0xd26CDF1b3E74758c1B30fA7E487DAb2458270ffe#code

âœ… Contract verified successfully!

ğŸ’¾ Updating deployment records...

âœ… Verifying Diamond state...
   Total facets after upgrade: 6


ğŸ‰ Upgrade completed successfully!

ğŸ“‹ Final State:
   Diamond: 0xE133CD2eE4d835AC202942Baff2B1D6d47862d34
   Total facets: 6

   Active Facets:
   âœ“ âœ… DiamondCutFacet: 0xE2e99706D46937869EC329E6B85a1E18c0FaC8eE (1 functions)
   âœ“ âœ… DiamondLoupeFacet: 0x0c3677736296c42A5151FeD983fcE68AC84e6B8A (5 functions)
   ğŸ†• âœ… GovernanceFacet: 0xd26CDF1b3E74758c1B30fA7E487DAb2458270ffe (37 functions)
   âœ“ âœ… LiquidityPoolFacet: 0x49e94AAe64AA7b56A8Ab869C908aD7f66151CBA5 (22 functions)
   âœ“ âœ… OwnershipFacet: 0xF5eb95a1488958feA4243ff7b9415A9aA863Fc3E (2 functions)
   âœ“ âœ… AddressLinkingFacet: 0xB95985Ce0DB7c224eDf78E23A51267Cacb866563 (7 functions)

ğŸ’¾ Deployment info saved to: /home/bilal/bilal_projects/BlockFinax/smart_contract/deployments/deployments.json

âœ¨ Your Diamond is now up to date!

\033[0;32mâœ… liskSepolia upgrade successful!\033[0m

\033[1;33mâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\033[0m
\033[1;33mâ”‚ Upgrading Network: baseSepolia\033[0m
\033[1;33mâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\033[0m

WARNING: You are currently using Node.js v23.11.0, which is not supported by Hardhat. This can lead to unexpected behavior. See https://v2.hardhat.org/nodejs-versions


[dotenv@17.2.3] injecting env (8) from .env -- tip: ğŸ” prevent committing .env to code: https://dotenvx.com/precommit
[dotenv@17.2.3] injecting env (0) from .env -- tip: ğŸ”‘ add access controls to secrets: https://dotenvx.com/ops

ğŸ”„ Starting Diamond upgrade on baseSepolia...

ğŸ“‹ Upgrade Info:
   Network: baseSepolia
   Chain ID: 84532
   Deployer: 0xf070F568c125b2740391136662Fc600A2A29D2A6
   Balance: 0.005056539675022879 ETH

ğŸ“ Diamond Address: 0xb899A968e785dD721dbc40e71e2FAEd7B2d84711

ğŸ” Checking for updated facets...
   Reading Diamond state...
   âœ“ AddressLinkingFacet - Up to date
   âœ“ DiamondLoupeFacet - Up to date
   âœ¨ GovernanceFacet - UPDATED (will be replaced)
   âœ“ LiquidityPoolFacet - Up to date
   âœ“ OwnershipFacet - Up to date

ğŸ” Checking for removed facets...
   Deployed facets: DiamondLoupeFacet, GovernanceFacet, LiquidityPoolFacet, OwnershipFacet, AddressLinkingFacet
   Current facets in code: AddressLinkingFacet, DiamondLoupeFacet, GovernanceFacet, LiquidityPoolFacet, OwnershipFacet

ğŸ“Š Upgrade Summary:
   New facets: 0
   Updated facets: 1
   Removed facets: 0

ğŸ“¦ Deploying GovernanceFacet...
âœ… GovernanceFacet deployed at: 0x8357D6Fba335371a09F5C263a90962F8e9de9D23
   â™»ï¸  REPLACE GovernanceFacet: 35 existing functions
   â• ADD GovernanceFacet: 2 new functions

âš™ï¸  Executing Diamond upgrade...
   Total operations: 2
   Transaction sent: 0x1116007ab888c3b6fcce77d40663509a23f4299f00a55cc489fce675ca581323
   âœ… Upgrade successful! Gas used: 619701

ğŸ” Verifying new facets...

ğŸ” Verifying contract at 0x8357D6Fba335371a09F5C263a90962F8e9de9D23 on baseSepolia...
WARNING: You are currently using Node.js v23.11.0, which is not supported by Hardhat. This can lead to unexpected behavior. See https://v2.hardhat.org/nodejs-versions


[dotenv@17.2.3] injecting env (0) from .env -- tip: âš™ï¸  enable debug logging with { debug: true }
[INFO] Sourcify Verification Skipped: Sourcify verification is currently disabled. To enable it, add the following entry to your Hardhat configuration:

sourcify: {
  enabled: true
}

Or set 'enabled' to false to hide this message.

For more information, visit https://hardhat.org/hardhat-runner/plugins/nomicfoundation-hardhat-verify#verifying-on-sourcify
[WARNING] Network and explorer-specific api keys are deprecated in favour of the new Etherscan v2 api. Support for v1 is expected to end by May 31st, 2025. To migrate, please specify a single Etherscan.io api key the apiKey config value.
hardhat-verify found one or more errors during the verification process:

Etherscan:
The block explorer's API responded that the contract contracts/facets/GovernanceFacet.sol:GovernanceFacet at 0x8357D6Fba335371a09F5C263a90962F8e9de9D23 is already verified.
This can happen if you used the '--force' flag. However, re-verification of contracts might not be supported
by the explorer (e.g., Etherscan), or the contract may have already been verified with a full match.


âš ï¸  Verification failed: Command failed: npx hardhat verify --network baseSepolia 0x8357D6Fba335371a09F5C263a90962F8e9de9D23 --contract contracts/facets/GovernanceFacet.sol:GovernanceFacet

ğŸ’¾ Updating deployment records...

âœ… Verifying Diamond state...
   Total facets after upgrade: 6


ğŸ‰ Upgrade completed successfully!

ğŸ“‹ Final State:
   Diamond: 0xb899A968e785dD721dbc40e71e2FAEd7B2d84711
   Total facets: 6

   Active Facets:
   âœ“ âœ… DiamondCutFacet: 0x34a15ca403360F2F7b3389e3A70Fb8958aB518e6 (1 functions)
   âœ“ âœ… DiamondLoupeFacet: 0x80dbBdaf6d9F582A9730292AD2112D42b8533ce8 (5 functions)
   ğŸ†• âš ï¸ GovernanceFacet: 0x8357D6Fba335371a09F5C263a90962F8e9de9D23 (37 functions)
   âœ“ âš ï¸ LiquidityPoolFacet: 0x0f7E33129a6f420963221921817790FC83aF5714 (22 functions)
   âœ“ âœ… OwnershipFacet: 0x8aB4730fBD8E702c147A925890102D4A7d476459 (2 functions)
   âœ“ âš ï¸ AddressLinkingFacet: 0xe76A4A9f30CA27306428d68Cac03d33a25475C74 (7 functions)

ğŸ’¾ Deployment info saved to: /home/bilal/bilal_projects/BlockFinax/smart_contract/deployments/deployments.json

âœ¨ Your Diamond is now up to date!

\033[0;32mâœ… baseSepolia upgrade successful!\033[0m

\033[1;33mâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\033[0m
\033[1;33mâ”‚ Upgrading Network: sepolia\033[0m
\033[1;33mâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\033[0m

WARNING: You are currently using Node.js v23.11.0, which is not supported by Hardhat. This can lead to unexpected behavior. See https://v2.hardhat.org/nodejs-versions


[dotenv@17.2.3] injecting env (8) from .env -- tip: ğŸ” prevent building .env in docker: https://dotenvx.com/prebuild
[dotenv@17.2.3] injecting env (0) from .env -- tip: ğŸ”‘ add access controls to secrets: https://dotenvx.com/ops

ğŸ”„ Starting Diamond upgrade on sepolia...

ğŸ“‹ Upgrade Info:
   Network: sepolia
   Chain ID: 11155111
   Deployer: 0xf070F568c125b2740391136662Fc600A2A29D2A6
   Balance: 0.002962089220189049 ETH

ğŸ“ Diamond Address: 0xA4d19a7b133d2A9fAce5b1ad407cA7b9D4Ee9284

ğŸ” Checking for updated facets...
   Reading Diamond state...
   âœ¨ AddressLinkingFacet - UPDATED (will be replaced)
   âœ¨ DiamondLoupeFacet - UPDATED (will be replaced)
   âœ¨ GovernanceFacet - UPDATED (will be replaced)
   âœ¨ LiquidityPoolFacet - UPDATED (will be replaced)
   âœ¨ OwnershipFacet - UPDATED (will be replaced)

ğŸ” Checking for removed facets...
   Deployed facets: AddressLinkingFacet, DiamondLoupeFacet, GovernanceFacet, LiquidityPoolFacet, OwnershipFacet
   Current facets in code: AddressLinkingFacet, DiamondLoupeFacet, GovernanceFacet, LiquidityPoolFacet, OwnershipFacet

ğŸ“Š Upgrade Summary:
   New facets: 0
   Updated facets: 5
   Removed facets: 0

ğŸ“¦ Deploying AddressLinkingFacet...
âœ… AddressLinkingFacet deployed at: 0x96a6e5A74c6EDbBfB0e32C2A0521cF2023d6d4d0
   â™»ï¸  REPLACE AddressLinkingFacet: 7 existing functions

ğŸ“¦ Deploying DiamondLoupeFacet...
âœ… DiamondLoupeFacet deployed at: 0x149B424900AB4283E9F9Ea137943dCE0f83D9385
   â™»ï¸  REPLACE DiamondLoupeFacet: 5 existing functions

ğŸ“¦ Deploying GovernanceFacet...
ProviderError: insufficient funds for gas * price + value: balance 935773937146079, tx cost 7929119248170210, overshot 6993345311024131
    at HttpProvider.request (/home/bilal/bilal_projects/BlockFinax/smart_contract/node_modules/hardhat/src/internal/core/providers/http.ts:116:21)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async HardhatEthersSigner.sendTransaction (/home/bilal/bilal_projects/BlockFinax/smart_contract/node_modules/@nomicfoundation/hardhat-ethers/src/signers.ts:181:18)
    at async ContractFactory.deploy (/home/bilal/bilal_projects/BlockFinax/smart_contract/node_modules/ethers/src.ts/contract/factory.ts:111:24)
    at async deployFacet (/home/bilal/bilal_projects/BlockFinax/smart_contract/scripts/upgrade.ts:256:17)
    at async main (/home/bilal/bilal_projects/BlockFinax/smart_contract/scripts/upgrade.ts:427:29)

\033[0;31mâŒ sepolia upgrade failed!\033[0m

================================================
ğŸ“Š Upgrade Summary
================================================

\033[0;32mâœ… Successfully upgraded:\033[0m
   - liskSepolia
   - baseSepolia

\033[0;31mâŒ Failed to upgrade:\033[0m
   - sepolia

